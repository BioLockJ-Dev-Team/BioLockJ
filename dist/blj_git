#!/bin/bash
#########################################################################
##                                                                     ##
##  This script fetches the latest BioLockJ code from GitHub.          ##
##  Set $BLJ file permissions to 774 with group owner $BLJ_GRP_OWNER.  ##
##                                                                     ##
#########################################################################

function valid_dir {
	if [ ${#1} -gt 0 ] && [ -d "$1" ]; then  
		echo "Y" 
	else 
		echo "N"
	fi
}

echo "Fetch latest BioLockJ code from GitHub"
if [ "$(valid_dir $BLJ)" == "Y" ]; then
	cd $BLJ
	git fetch
	git checkout -f origin/master
	echo build complete
	chmod -R 774 $BLJ
	chmod 744 $BLJ/dist/blj_git
	chmod 744 $BLJ/dist/blj_build
	[ ${#BLJ_GRP_OWNER} -gt 0 ] && chown -R $BLJ_GRP_OWNER $BLJ
else
	echo "Invalid directory path: $BLJ"
fi